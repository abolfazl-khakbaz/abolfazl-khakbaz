name: GitHub Metrics

on:
  schedule:
    - cron: "0 4 * * *"
  workflow_dispatch:
  push:
    branches:
      - main
      - master

jobs:
  github-metrics:
    runs-on: ubuntu-latest

    permissions:
      contents: write

    steps:
      - name: Generate GitHub Metrics (Neon style)
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_README_TOKEN }}

          # ğŸ§¾ Base config
          user: abolfazl-khakbaz
          template: classic
          base: header, activity, repositories, metadata
          config_timezone: Europe/Rome
          config_display: large
          filename: github-metrics.svg

          # ğŸŒˆ Neon / Cyberpunk style
          extras_css: |
            :root {
              --ak-neon-bg: #020617;
              --ak-neon-primary: #00f0ff;
              --ak-neon-secondary: #22c55e;
              --ak-neon-pink: #ec4899;
            }
            svg {
              background: radial-gradient(circle at 0% 0%, #0b1120 0, #020617 40%, #000000 100%);
              border-radius: 18px;
              box-shadow:
                0 0 25px rgba(0, 240, 255, 0.35),
                0 0 60px rgba(34, 197, 94, 0.20);
            }
            svg text {
              font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
                           "Segoe UI", Roboto, "JetBrains Mono", monospace;
            }
            .header, .header * {
              fill: var(--ak-neon-primary) !important;
              color: var(--ak-neon-primary) !important;
            }
            a {
              fill: var(--ak-neon-secondary) !important;
              color: var(--ak-neon-secondary) !important;
            }
            .field, .label, .field > text {
              fill: #e5e7eb !important;
              color: #e5e7eb !important;
            }
            .strokes, .border, rect[stroke] {
              stroke: rgba(148, 163, 184, 0.7) !important;
            }

          config_animations: yes

          # ğŸŒ Languages (ÙÙ‚Ø· most-usedØŒ stable + Ø´Ø§Ù…Ù„ private)
          plugin_languages: yes
          plugin_languages_sections: most-used
          plugin_languages_indepth: yes
          plugin_languages_categories: programming
          plugin_languages_limit: 12
          plugin_languages_other: yes
          plugin_languages_details: percentage
          plugin_languages_threshold: 0

          # ğŸ“† Isometric commit calendar
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

          # ğŸ… Achievements
          plugin_achievements: yes
          plugin_achievements_display: detailed
          plugin_achievements_secrets: yes
          plugin_achievements_threshold: C

          # ğŸ“ˆ Lines of code
          plugin_lines: yes

          # Repositories scope (public + private)
          repositories_affiliations: owner,collaborator
          repositories_forks: yes
