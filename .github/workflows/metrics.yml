name: GitHub Metrics

on:
  # Ù‡Ø± Ø±ÙˆØ² ÛŒÚ© Ø¨Ø§Ø±
  schedule:
    - cron: "0 4 * * *"
  # Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ Ø§Ø² ØªØ¨ Actions
  workflow_dispatch:
  # (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) Ø±ÙˆÛŒ push Ø±ÙˆÛŒ main/master Ù‡Ù… Ø±Ø§Ù† Ø´ÙˆØ¯
  push:
    branches:
      - main
      - master

jobs:
  github-metrics:
    runs-on: ubuntu-latest

    # Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¨ØªÙˆÙ†Ù‡ github-metrics.svg Ø±Ùˆ Ø¯Ø§Ø®Ù„ Ø±ÛŒÙ¾Ùˆ Ú©Ø§Ù…ÛŒØª Ú©Ù†Ù‡
    permissions:
      contents: write

    steps:
      - name: Generate GitHub Metrics
        uses: lowlighter/metrics@latest
        with:
          # PAT Ú©Ù‡ ØªÙˆÛŒ Secrets Ø¨Ù‡ Ø§Ø³Ù… METRICS_README_TOKEN Ø°Ø®ÛŒØ±Ù‡ Ú©Ø±Ø¯ÛŒ
          token: ${{ secrets.METRICS_README_TOKEN }}

          # ğŸ§¾ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø§ÛŒÙ‡
          user: abolfazl-khakbaz
          template: classic
          base: header, activity, repositories, metadata
          config_timezone: Europe/Rome
          config_display: large
          filename: github-metrics.svg

          # ğŸŒˆ Ø²Ø¨Ø§Ù†â€ŒÙ‡Ø§ (Ø¨Ø§ private repos)
          plugin_languages: yes
          plugin_languages_indepth: yes
          plugin_languages_categories: programming
          plugin_languages_limit: 12
          plugin_languages_other: yes
          plugin_languages_details: percentage

          # ğŸ“† ØªÙ‚ÙˆÛŒÙ… Ú©Ø§Ù…ÛŒØªâ€ŒÙ‡Ø§ (Ø§ÛŒØ²ÙˆÙ…ØªØ±ÛŒÚ©)
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

          # ğŸ… Achievements
          plugin_achievements: yes
          plugin_achievements_display: detailed
          plugin_achievements_secrets: yes
          plugin_achievements_threshold: C

          # ğŸ“ˆ Lines of code
          plugin_lines: yes

          # Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´Ù†
          repositories_affiliations: owner,collaborator
          repositories_forks: yes
